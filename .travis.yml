language: python
python:
            - '3.8'

install:
            - pip install -r requirements-dev.txt

env:
            - PYTHONPATH=/home/travis/build/jimenacotera/repototestwhatiswrong

script:
            - make tests
after_success:
        - test $TRAVIS_BRANCH = "staging" && ./deploy.sh
        - test $TRAVIS_BRANCH = "staging" && python utils/gen_pr_req.py

deploy:
            - provider: heroku
              api_key: $HEROKU_API_KEY
              app: demo-repo22
              on:
                branch: master
